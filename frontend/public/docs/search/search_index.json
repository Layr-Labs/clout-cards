{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Clout Cards Documentation","text":"<p>Welcome to the Clout Cards documentation! Clout Cards is a crypto poker platform that combines on-chain asset management with Twitter social identity.</p> <p>Build on EigenCloud</p> <p>Clout Cards is powered by EigenCloud \u2014 a platform for building verifiable, trustless applications with TEE security. Want to build your own? Check out the EigenCloud Developer Docs.</p>"},{"location":"#what-is-clout-cards","title":"What is Clout Cards?","text":"<p>Clout Cards allows you to:</p> <ul> <li>Play real poker with ETH deposits and wagers</li> <li>Use your Twitter identity to represent you at the table</li> <li>Deposit and withdraw funds through smart contracts on Base Sepolia</li> <li>Chat with other players in real-time at your table</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>How To Play - Learn how to get started, deposit funds, join tables, and play poker.</li> <li>Architecture - Understand the technical architecture including smart contracts, backend services, and real-time events.</li> <li>GitHub Repository - View the source code, contribute, or report issues.</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<ol> <li>Connect your wallet - Use MetaMask or another Web3 wallet</li> <li>Sign in with Twitter - Link your Twitter account for identity</li> <li>Deposit ETH - Fund your escrow balance via the smart contract</li> <li>Join a table - Pick a table and buy in with your escrow balance</li> <li>Play poker! - Standard Texas Hold'em rules apply</li> </ol>"},{"location":"#need-help","title":"Need Help?","text":"<p>If you have questions or run into issues:</p> <ul> <li>GitHub Issues - Report bugs or request features</li> <li>GitHub Repository - View the full source code</li> </ul>"},{"location":"architecture/","title":"Architecture Overview","text":"<p>Clout Cards is built with a modern, secure architecture that combines on-chain asset management with off-chain game logic.</p>"},{"location":"architecture/#high-level-architecture","title":"High-Level Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         Frontend (React)                        \u2502\n\u2502  - Wallet Connection    - Game UI    - Real-time Updates (SSE)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Backend (Node.js/Express)                  \u2502\n\u2502  - Game Logic    - Event Signing    - Twitter Auth    - SSE     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u25bc                       \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502    PostgreSQL     \u2502   \u2502   Smart Contract  \u2502\n        \u2502   (Game State)    \u2502   \u2502  (Asset Custody)  \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#core-components","title":"Core Components","text":"Component Technology Purpose Smart Contracts Solidity Asset custody, deposits, withdrawals Backend Node.js, Express, Prisma Game logic, event signing, API Frontend React, TypeScript User interface, wallet integration Events PostgreSQL NOTIFY, SSE Real-time game updates"},{"location":"architecture/#design-principles","title":"Design Principles","text":""},{"location":"architecture/#1-trustless-asset-management","title":"1. Trustless Asset Management","text":"<ul> <li>All funds are held in smart contracts</li> <li>Users maintain custody of their assets</li> <li>Withdrawals require user signature</li> </ul>"},{"location":"architecture/#2-signed-event-chain","title":"2. Signed Event Chain","text":"<ul> <li>Every game action is signed by the server</li> <li>Events are cryptographically verifiable</li> <li>Full audit trail in the database</li> </ul>"},{"location":"architecture/#3-real-time-updates","title":"3. Real-time Updates","text":"<ul> <li>Server-Sent Events (SSE) for live updates</li> <li>PostgreSQL LISTEN/NOTIFY for efficient broadcasting</li> <li>No polling required</li> </ul>"},{"location":"architecture/#4-social-identity","title":"4. Social Identity","text":"<ul> <li>Twitter OAuth for identity</li> <li>Profile pictures and handles displayed at tables</li> <li>Social features (chat) tied to Twitter identity</li> </ul>"},{"location":"architecture/#data-flow","title":"Data Flow","text":"<ol> <li>Deposits: User \u2192 Smart Contract \u2192 Backend listens \u2192 Updates balance</li> <li>Game Actions: User \u2192 Backend \u2192 Database + Event \u2192 SSE broadcast</li> <li>Withdrawals: User \u2192 Backend signs \u2192 User \u2192 Smart Contract</li> </ol>"},{"location":"architecture/#security-model","title":"Security Model","text":"<ul> <li>Assets: Secured by smart contract (on-chain)</li> <li>Game Logic: Server-side only (prevents cheating)</li> <li>Identity: Twitter OAuth + wallet signature</li> <li>Events: EIP-712 signed payloads</li> </ul>"},{"location":"architecture/#open-source","title":"Open Source","text":"<p>Clout Cards is fully open source. View the complete codebase on GitHub:</p> <ul> <li>GitHub Repository - Full source code</li> <li>Issues - Report bugs or request features</li> <li>Pull Requests - Contribute improvements</li> </ul>"},{"location":"architecture/backend/","title":"Backend Services","text":"<p>The backend handles game logic, authentication, and real-time events.</p>"},{"location":"architecture/backend/#technology-stack","title":"Technology Stack","text":"Component Technology Runtime Node.js Framework Express Database PostgreSQL ORM Prisma Language TypeScript"},{"location":"architecture/backend/#core-services","title":"Core Services","text":""},{"location":"architecture/backend/#game-logic-services","title":"Game Logic (<code>/services</code>)","text":"Service Purpose <code>startHand.ts</code> Initialize new poker hands <code>playerAction.ts</code> Process fold/call/raise/check/all-in <code>pokerHandEvaluation.ts</code> Determine winning hands <code>potSplitting.ts</code> Calculate side pots"},{"location":"architecture/backend/#authentication","title":"Authentication","text":"Service Purpose <code>userAuth.ts</code> Wallet signature verification <code>twitter.ts</code> Twitter OAuth handling Middleware <code>walletAuth.ts</code>, <code>twitterAuth.ts</code>"},{"location":"architecture/backend/#asset-management","title":"Asset Management","text":"Service Purpose <code>escrowBalance.ts</code> Track player balances <code>withdrawalSigning.ts</code> Sign withdrawal authorizations <code>contractListener.ts</code> Listen for on-chain events"},{"location":"architecture/backend/#api-structure","title":"API Structure","text":""},{"location":"architecture/backend/#public-endpoints-no-auth","title":"Public Endpoints (No Auth)","text":"<ul> <li><code>GET /pokerTables</code> - List all tables</li> <li><code>GET /tablePlayers</code> - List players at a table</li> <li><code>GET /watchCurrentHand</code> - Current hand state (no hole cards)</li> <li><code>GET /leaderboard</code> - Top players</li> </ul>"},{"location":"architecture/backend/#authenticated-endpoints","title":"Authenticated Endpoints","text":"<ul> <li><code>POST /joinTable</code> - Join a poker table</li> <li><code>POST /standUp</code> - Leave a table</li> <li><code>POST /action</code> - Make a poker action</li> <li><code>GET /currentHand</code> - Current hand with hole cards</li> <li><code>POST /signEscrowWithdrawal</code> - Request withdrawal signature</li> </ul>"},{"location":"architecture/backend/#real-time","title":"Real-time","text":"<ul> <li><code>GET /api/tables/:tableId/events</code> - SSE stream for table events</li> </ul>"},{"location":"architecture/backend/#database-schema","title":"Database Schema","text":"<p>Key models:</p> <pre><code>PokerTable\n\u251c\u2500\u2500 Hand (1:many)\n\u2502   \u251c\u2500\u2500 HandPlayer (1:many)\n\u2502   \u251c\u2500\u2500 HandAction (1:many)\n\u2502   \u2514\u2500\u2500 Pot (1:many)\n\u2514\u2500\u2500 TableSeatSession (1:many)\n\nPlayerEscrowBalance\nEvent (audit log)\nLeaderboardStats\n</code></pre>"},{"location":"architecture/backend/#event-signing","title":"Event Signing","text":"<p>All game events are signed using EIP-712:</p> <ol> <li>Event payload is serialized to JSON</li> <li>EIP-712 digest is computed</li> <li>Server signs with TEE private key</li> <li>Signature (r, s, v) is stored with event</li> </ol> <p>This creates a verifiable audit trail of all game actions.</p>"},{"location":"architecture/backend/#background-jobs","title":"Background Jobs","text":"Job Interval Purpose Action Timeout Checker 1.5s Auto-fold timed-out players Hand Start Checker 1.5s Start hands when ready Contract Listener Real-time Process on-chain events"},{"location":"architecture/events/","title":"Real-time Events","text":"<p>Clout Cards uses Server-Sent Events (SSE) with PostgreSQL LISTEN/NOTIFY for real-time updates.</p>"},{"location":"architecture/events/#why-sse","title":"Why SSE?","text":"Feature SSE WebSockets Direction Server \u2192 Client Bidirectional Complexity Simple More complex Reconnection Built-in Manual Use case Event streaming Chat, gaming <p>For poker, SSE is ideal: - Game actions sent via REST API - Updates streamed via SSE - No need for bidirectional communication</p>"},{"location":"architecture/events/#event-flow","title":"Event Flow","text":"<pre><code>1. Player makes action (REST API)\n      \u2193\n2. Backend processes action\n      \u2193\n3. Event created in database\n      \u2193\n4. PostgreSQL TRIGGER fires\n      \u2193\n5. pg_notify('new_event', payload)\n      \u2193\n6. Backend receives notification\n      \u2193\n7. SSE broadcasts to subscribers\n      \u2193\n8. Frontend receives and processes\n</code></pre>"},{"location":"architecture/events/#event-types","title":"Event Types","text":""},{"location":"architecture/events/#game-events-stored-in-db","title":"Game Events (stored in DB)","text":"Event Description <code>hand_start</code> New hand begins, blinds posted <code>hand_action</code> Player action (fold/call/raise/etc) <code>community_cards</code> Flop/turn/river dealt <code>hand_end</code> Hand complete, winners announced <code>join_table</code> Player sits down <code>leave_table</code> Player stands up"},{"location":"architecture/events/#ephemeral-events-in-memory-only","title":"Ephemeral Events (in-memory only)","text":"Event Description <code>chat_message</code> Player chat message"},{"location":"architecture/events/#event-payload-structure","title":"Event Payload Structure","text":"<p>All events follow this structure:</p> <pre><code>{\n  \"kind\": \"hand_action\",\n  \"table\": { \"id\": 1, \"name\": \"Table 1\" },\n  \"hand\": { \"id\": 123, \"round\": \"FLOP\" },\n  \"action\": {\n    \"type\": \"RAISE\",\n    \"amount\": \"1000000000\",\n    \"seatNumber\": 3\n  },\n  \"playerBalances\": [\n    { \"seatNumber\": 1, \"tableBalanceGwei\": \"5000000000\" },\n    { \"seatNumber\": 3, \"tableBalanceGwei\": \"4000000000\" }\n  ]\n}\n</code></pre>"},{"location":"architecture/events/#sse-endpoint","title":"SSE Endpoint","text":"<pre><code>GET /api/tables/:tableId/events?lastEventId=0\n</code></pre>"},{"location":"architecture/events/#query-parameters","title":"Query Parameters","text":"Param Description <code>lastEventId</code> Resume from this event ID (for reconnection)"},{"location":"architecture/events/#response-format","title":"Response Format","text":"<pre><code>: connected\n\nid: 1234\ndata: {\"kind\":\"hand_start\",...}\n\nid: 1235\ndata: {\"kind\":\"hand_action\",...}\n\n: heartbeat\n</code></pre>"},{"location":"architecture/events/#frontend-processing","title":"Frontend Processing","text":""},{"location":"architecture/events/#event-queue","title":"Event Queue","text":"<p>Events are processed sequentially to ensure correct ordering:</p> <pre><code>// utils/eventQueue.ts\nclass EventQueue {\n  enqueue(event)     // Add to queue\n  processQueue()     // Process one at a time\n}\n</code></pre>"},{"location":"architecture/events/#hook-usage","title":"Hook Usage","text":"<pre><code>useTableEvents({\n  tableId: 1,\n  enabled: true,\n  lastEventId: 0,\n  onEvent: async (event) =&gt; {\n    // Handle event\n  }\n});\n</code></pre>"},{"location":"architecture/events/#reconnection","title":"Reconnection","text":"<p>The frontend handles disconnections automatically:</p> <ol> <li>SSE connection drops</li> <li>Exponential backoff (1s, 2s, 4s, ... up to 5min)</li> <li>Reconnect with <code>lastEventId</code> to resume</li> <li>Missed events are sent immediately</li> <li>Continue streaming new events</li> </ol>"},{"location":"architecture/events/#postgresql-setup","title":"PostgreSQL Setup","text":"<pre><code>-- Trigger function\nCREATE FUNCTION notify_new_event() RETURNS TRIGGER AS $$\nBEGIN\n  PERFORM pg_notify('new_event', json_build_object(\n    'eventId', NEW.event_id,\n    'tableId', NEW.table_id,\n    'kind', NEW.kind\n  )::text);\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Trigger on events table\nCREATE TRIGGER event_notify_trigger\n  AFTER INSERT ON events\n  FOR EACH ROW\n  EXECUTE FUNCTION notify_new_event();\n</code></pre>"},{"location":"architecture/frontend/","title":"Frontend Architecture","text":"<p>The frontend is a React single-page application with real-time updates.</p>"},{"location":"architecture/frontend/#technology-stack","title":"Technology Stack","text":"Component Technology Framework React 19 Language TypeScript Build Tool Vite Styling CSS (custom) Animation Framer Motion Routing React Router"},{"location":"architecture/frontend/#project-structure","title":"Project Structure","text":"<pre><code>frontend/src/\n\u251c\u2500\u2500 components/       # Reusable UI components\n\u251c\u2500\u2500 contexts/         # React contexts (Wallet)\n\u251c\u2500\u2500 hooks/            # Custom hooks\n\u251c\u2500\u2500 services/         # API client functions\n\u251c\u2500\u2500 utils/            # Utility functions\n\u251c\u2500\u2500 App.tsx           # Main app with routing\n\u251c\u2500\u2500 Table.tsx         # Poker table view\n\u251c\u2500\u2500 Play.tsx          # Table list view\n\u251c\u2500\u2500 Profile.tsx       # User profile\n\u2514\u2500\u2500 Leaderboard.tsx   # Leaderboard page\n</code></pre>"},{"location":"architecture/frontend/#key-components","title":"Key Components","text":""},{"location":"architecture/frontend/#wallet-integration","title":"Wallet Integration","text":"<pre><code>// contexts/WalletContext.tsx\n- connectWallet()     // Connect MetaMask\n- disconnectWallet()  // Disconnect\n- ensureCorrectChain() // Switch to Base Sepolia\n</code></pre>"},{"location":"architecture/frontend/#real-time-events","title":"Real-time Events","text":"<pre><code>// hooks/useTableEvents.ts\n- SSE connection to /api/tables/:tableId/events\n- Automatic reconnection with backoff\n- Event queue for sequential processing\n</code></pre>"},{"location":"architecture/frontend/#api-client","title":"API Client","text":"<pre><code>// services/apiClient.ts\n- Centralized fetch wrapper\n- Auth header injection\n- Error handling\n</code></pre>"},{"location":"architecture/frontend/#state-management","title":"State Management","text":"<p>The app uses React's built-in state management:</p> Scope Solution Global (wallet) React Context Page-level useState/useReducer Server state Custom hooks with fetch"},{"location":"architecture/frontend/#real-time-updates","title":"Real-time Updates","text":"<p>Events flow from server to UI:</p> <pre><code>PostgreSQL NOTIFY\n      \u2193\nSSE Endpoint (/api/tables/:id/events)\n      \u2193\nuseTableEvents hook\n      \u2193\nEventQueue (sequential processing)\n      \u2193\nhandleEvent callback\n      \u2193\nsetState updates\n      \u2193\nUI re-renders with animations\n</code></pre>"},{"location":"architecture/frontend/#animations","title":"Animations","text":"<p>Framer Motion handles animations:</p> <ul> <li>Player join/leave transitions</li> <li>Card dealing animations</li> <li>Action announcements</li> <li>Balance count-up effects</li> <li>Chat panel slide-in</li> </ul>"},{"location":"architecture/frontend/#authentication-flow","title":"Authentication Flow","text":"<pre><code>1. Connect Wallet (MetaMask)\n      \u2193\n2. Sign Session Message\n      \u2193\n3. Store signature in memory\n      \u2193\n4. Twitter OAuth redirect\n      \u2193\n5. Store Twitter token in localStorage\n      \u2193\n6. User is \"fully logged in\"\n</code></pre>"},{"location":"architecture/frontend/#environment-configuration","title":"Environment Configuration","text":"<pre><code>// config/env.ts\n- isProduction()      // Check NODE_ENV\n- getBackendUrl()     // API base URL\n- getTargetChain()    // Chain config (Base Sepolia / local)\n</code></pre>"},{"location":"architecture/smart-contracts/","title":"Smart Contracts","text":"<p>The Clout Cards smart contract handles all on-chain asset management.</p>"},{"location":"architecture/smart-contracts/#contract-overview","title":"Contract Overview","text":"Item Value Network Base Sepolia Contract CloutCards (Upgradeable Proxy) Standard ERC-1967 Proxy Pattern"},{"location":"architecture/smart-contracts/#core-functions","title":"Core Functions","text":""},{"location":"architecture/smart-contracts/#deposits","title":"Deposits","text":"<pre><code>function deposit() external payable\n</code></pre> <ul> <li>Accepts ETH and credits the sender's escrow balance</li> <li>Emits <code>Deposited(address indexed player, uint256 amount)</code></li> <li>No minimum deposit required</li> </ul>"},{"location":"architecture/smart-contracts/#withdrawals","title":"Withdrawals","text":"<pre><code>function withdraw(\n    address to,\n    uint256 amount,\n    uint256 nonce,\n    uint256 expiry,\n    uint8 v,\n    bytes32 r,\n    bytes32 s\n) external\n</code></pre> <ul> <li>Requires server signature (prevents unauthorized withdrawals)</li> <li>Signature includes nonce and expiry for security</li> <li>Transfers ETH to the specified address</li> </ul>"},{"location":"architecture/smart-contracts/#escrow-balance","title":"Escrow Balance","text":"<p>Each player has an escrow balance tracked on-chain:</p> <pre><code>mapping(address =&gt; uint256) public escrowBalances;\n</code></pre> <ul> <li>Increased by deposits</li> <li>Decreased by withdrawals</li> <li>Game winnings/losses are handled off-chain, then settled via withdrawals</li> </ul>"},{"location":"architecture/smart-contracts/#events","title":"Events","text":"Event Parameters Description <code>Deposited</code> player, amount ETH deposited to escrow <code>Withdrawn</code> player, to, amount ETH withdrawn from escrow"},{"location":"architecture/smart-contracts/#security-features","title":"Security Features","text":""},{"location":"architecture/smart-contracts/#signature-verification","title":"Signature Verification","text":"<ul> <li>Withdrawals require EIP-712 typed signatures</li> <li>Server signs with TEE private key</li> <li>Prevents unauthorized withdrawals</li> </ul>"},{"location":"architecture/smart-contracts/#nonce-system","title":"Nonce System","text":"<ul> <li>Each withdrawal has a unique nonce</li> <li>Prevents replay attacks</li> <li>Tracked per-player</li> </ul>"},{"location":"architecture/smart-contracts/#expiry","title":"Expiry","text":"<ul> <li>Signatures expire after a set time</li> <li>Prevents stale withdrawal requests</li> <li>Currently: 5 minutes</li> </ul>"},{"location":"architecture/smart-contracts/#upgradeability","title":"Upgradeability","text":"<p>The contract uses the ERC-1967 proxy pattern:</p> <ul> <li>Proxy Contract: Holds state and delegates calls</li> <li>Implementation: Contains logic, can be upgraded</li> <li>Admin: Can upgrade implementation (multisig recommended)</li> </ul> <p>Upgrade Risks</p> <p>Contract upgrades should be carefully reviewed and tested. State corruption is possible if not handled correctly.</p>"},{"location":"architecture/tee/","title":"EigenCloud TEE","text":"<p>Clout Cards runs inside a Trusted Execution Environment (TEE) to provide cryptographic guarantees that the game logic is executed correctly and cannot be tampered with.</p> <p>Build on EigenCloud</p> <p>Want to build your own verifiable application with TEE security? EigenCloud makes it easy to deploy trustless backends with cryptographic guarantees. Get started at the EigenCloud Developer Docs.</p>"},{"location":"architecture/tee/#what-is-a-tee","title":"What is a TEE?","text":"<p>A Trusted Execution Environment is a secure, isolated area of a processor that guarantees:</p> <ul> <li>Confidentiality: Data inside the enclave cannot be read by anyone, including the server operator</li> <li>Integrity: Code running inside cannot be modified</li> <li>Attestation: The enclave can prove what code it's running</li> </ul>"},{"location":"architecture/tee/#google-confidential-spaces","title":"Google Confidential Spaces","text":"<p>Clout Cards is deployed on Google Confidential Spaces, which provides:</p> Feature Description Hardware-backed isolation AMD SEV-SNP secure processor technology Memory encryption All enclave memory is encrypted Remote attestation Cryptographic proof of enclave integrity No operator access Even Google cannot access enclave data"},{"location":"architecture/tee/#the-tee-private-key","title":"The TEE Private Key","text":"<p>At the heart of Clout Cards' security model is a private key that never leaves the enclave:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              TEE Enclave (Confidential)             \u2502\n\u2502                                                     \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502           TEE Private Key                   \u2502   \u2502\n\u2502   \u2502   (Generated inside, never exported)        \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                        \u2502                            \u2502\n\u2502                        \u25bc                            \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502   \u2502         EIP-712 Signature Engine            \u2502   \u2502\n\u2502   \u2502   - Signs game events                       \u2502   \u2502\n\u2502   \u2502   - Signs withdrawal authorizations         \u2502   \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2502                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/tee/#key-properties","title":"Key Properties","text":"<ol> <li>Generated inside the enclave - The private key is created when the TEE starts and never exists outside</li> <li>Never exported - There is no mechanism to extract the key</li> <li>Deterministic derivation - The same enclave code always produces the same key (via attestation-bound derivation)</li> </ol>"},{"location":"architecture/tee/#what-gets-signed","title":"What Gets Signed","text":"<p>Every significant action is signed by the TEE private key using EIP-712 typed signatures:</p>"},{"location":"architecture/tee/#game-events","title":"Game Events","text":"Event Type Signed Data <code>hand_start</code> Table, players, blinds, dealer position <code>hand_action</code> Action type, amount, player, hand state <code>hand_end</code> Winners, pot distribution, final hands <code>join_table</code> Player, seat, buy-in amount <code>leave_table</code> Player, seat, balance returned"},{"location":"architecture/tee/#withdrawal-authorizations","title":"Withdrawal Authorizations","text":"Field Description Player address Who can withdraw Amount How much (in gwei) Nonce Unique per withdrawal Expiry When signature expires"},{"location":"architecture/tee/#verification","title":"Verification","text":"<p>Anyone can verify that data was processed inside the TEE:</p>"},{"location":"architecture/tee/#1-get-the-tee-public-key","title":"1. Get the TEE Public Key","text":"<p>The TEE's public key is derived from the private key and can be retrieved:</p> <pre><code>GET /teePublicKey\n</code></pre>"},{"location":"architecture/tee/#2-verify-event-signatures","title":"2. Verify Event Signatures","text":"<p>Each event in the database contains:</p> <pre><code>{\n  \"eventId\": 1234,\n  \"kind\": \"hand_action\",\n  \"payloadJson\": \"{...}\",\n  \"digest\": \"0x...\",\n  \"sigR\": \"0x...\",\n  \"sigS\": \"0x...\",\n  \"sigV\": 27,\n  \"teePubkey\": \"0x...\"\n}\n</code></pre> <p>Verify by: 1. Compute EIP-712 digest from <code>payloadJson</code> 2. Recover signer from <code>(sigR, sigS, sigV)</code> 3. Confirm recovered address matches <code>teePubkey</code></p>"},{"location":"architecture/tee/#3-verify-attestation","title":"3. Verify Attestation","text":"<p>Google Confidential Spaces provides attestation that proves: - The exact code running in the enclave - The enclave's integrity - The binding between the code and the TEE public key</p>"},{"location":"architecture/tee/#security-guarantees","title":"Security Guarantees","text":"Guarantee How It's Achieved Game logic integrity Code runs in attested TEE No card manipulation RNG and dealing inside enclave Withdrawal security Only TEE can sign valid withdrawals Audit trail All events signed and verifiable Operator honesty Operator cannot forge signatures"},{"location":"architecture/tee/#why-this-matters","title":"Why This Matters","text":"<p>Without the TEE:</p> <ul> <li>The server operator could manipulate game outcomes</li> <li>Withdrawal signatures could be forged</li> <li>There would be no proof that the game was fair</li> </ul> <p>With the TEE:</p> <ul> <li>Provably fair - Every action is signed by tamper-proof code</li> <li>Trustless - You don't need to trust the operator</li> <li>Verifiable - Anyone can verify the signatures match the TEE</li> <li>Secure - Private key cannot be extracted, even by the operator</li> </ul>"},{"location":"architecture/tee/#eigencloud-integration","title":"EigenCloud Integration","text":"<p>Clout Cards uses EigenCloud for TEE deployment and management:</p> <ul> <li>Simplified deployment to Google Confidential Spaces</li> <li>Key management and attestation services</li> <li>Monitoring and logging (without exposing sensitive data)</li> </ul> <p>The combination of EigenCloud + Google Confidential Spaces provides enterprise-grade security for trustless game execution.</p>"},{"location":"architecture/verifiability/","title":"Verifiability","text":"<p>Clout Cards implements a cryptographically verifiable audit trail that allows anyone to prove game integrity\u2014even though all data is stored in a traditional PostgreSQL database. The key insight is that the data is signed by tamper-proof code running inside a TEE, making it impossible for anyone (including the operator) to modify historical events without detection.</p> <p>Build on EigenCloud</p> <p>The verification architecture described here is powered by EigenCloud. Build your own verifiable applications with TEE-backed cryptographic guarantees. Learn more at the EigenCloud Developer Docs.</p>"},{"location":"architecture/verifiability/#the-trust-model","title":"The Trust Model","text":"<p>Traditional online poker requires trusting the operator not to cheat. Clout Cards inverts this model:</p> Traditional Poker Clout Cards Trust the operator Trust math and hardware Audit by regulation Audit by cryptography Opaque game logic Verifiable signatures Database is source of truth Database is verifiable cache"},{"location":"architecture/verifiability/#event-chain-architecture","title":"Event Chain Architecture","text":"<p>Every state-changing operation in Clout Cards creates an immutable, signed event:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    TEE (Trusted Execution Environment)          \u2502\n\u2502                                                                 \u2502\n\u2502   RPC Call \u2500\u2500\u25ba Process Logic \u2500\u2500\u25ba Create Event \u2500\u2500\u25ba Sign Event   \u2502\n\u2502                     \u2502                                \u2502          \u2502\n\u2502                     \u25bc                                \u25bc          \u2502\n\u2502              Update Cache Tables           EIP-712 Signature    \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    PostgreSQL Database                          \u2502\n\u2502                                                                 \u2502\n\u2502   Events Table (Source of Truth):                               \u2502\n\u2502   - event_id, kind, payload_json                                \u2502\n\u2502   - digest, sig_r, sig_s, sig_v                                 \u2502\n\u2502   - tee_pubkey, tee_version                                     \u2502\n\u2502                                                                 \u2502\n\u2502   Cache Tables (Derived State):                                 \u2502\n\u2502   - player_escrow_balances, hands, pots, etc.                   \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>The Events Table is the cryptographic source of truth. All other tables are caches that can be reconstructed by replaying the event log.</p>"},{"location":"architecture/verifiability/#how-digests-are-computed","title":"How Digests Are Computed","text":"<p>Every event is signed using EIP-712 typed data signatures, the same standard used for signing Ethereum transactions. This provides:</p> <ul> <li>Structured data - Not just raw bytes, but typed fields</li> <li>Domain separation - Signatures are bound to a specific chain and application</li> <li>Human readability - Wallets can display what's being signed</li> </ul>"},{"location":"architecture/verifiability/#eip-712-domain","title":"EIP-712 Domain","text":"<p>All Clout Cards events share this domain:</p> <pre><code>{\n  name: 'CloutCardsEvents',\n  version: '1',\n  chainId: &lt;network_chain_id&gt;,\n  verifyingContract: '0x0000000000000000000000000000000000000000'\n}\n</code></pre>"},{"location":"architecture/verifiability/#payload-structure","title":"Payload Structure","text":"<p>Events are signed as <code>RPCPayload</code> typed data:</p> <pre><code>const PAYLOAD_TYPES = {\n  RPCPayload: [\n    { name: 'kind', type: 'string' },      // Event type\n    { name: 'payload', type: 'string' },   // Canonical JSON\n    { name: 'nonce', type: 'uint256' },    // For replay protection\n  ],\n};\n</code></pre>"},{"location":"architecture/verifiability/#digest-computation","title":"Digest Computation","text":"<p>The digest (hash) is computed using the standard EIP-712 algorithm:</p> <pre><code>digest = keccak256(\n  \"\\x19\\x01\" +\n  domainSeparator +\n  hashStruct(RPCPayload)\n)\n</code></pre> <p>This produces a 32-byte hash that uniquely represents the event payload within the domain context.</p>"},{"location":"architecture/verifiability/#how-signatures-are-verified","title":"How Signatures Are Verified","text":"<p>Each event stored in the database contains:</p> Field Description <code>payloadJson</code> The canonical JSON of the game action <code>digest</code> The EIP-712 hash of the payload <code>sigR</code>, <code>sigS</code>, <code>sigV</code> ECDSA signature components <code>teePubkey</code> The TEE's Ethereum address"},{"location":"architecture/verifiability/#verification-steps","title":"Verification Steps","text":"<p>To verify any event:</p> <ol> <li>Recompute the digest from <code>payloadJson</code> using EIP-712</li> <li>Verify digest matches the stored <code>digest</code> field</li> <li>Recover the signer from the signature using ECDSA recovery</li> <li>Compare addresses - recovered address must match <code>teePubkey</code></li> </ol> <pre><code>// Client-side verification (simplified)\nconst message = {\n  kind: event.kind,\n  payload: event.payloadJson,\n  nonce: BigInt(0),\n};\n\n// Recompute digest\nconst computedDigest = ethers.TypedDataEncoder.hash(domain, PAYLOAD_TYPES, message);\n\n// Recover signer from signature\nconst recoveredAddress = ethers.recoverAddress(computedDigest, {\n  r: event.sigR,\n  s: event.sigS,\n  v: event.sigV,\n});\n\n// Verify signer matches TEE\nconst isValid = recoveredAddress.toLowerCase() === event.teePubkey.toLowerCase();\n</code></pre> <p>If verification succeeds, you have mathematical proof that: - The payload has not been modified since signing - The signature was created by the holder of the TEE private key - The TEE private key never leaves the secure enclave</p>"},{"location":"architecture/verifiability/#deck-commitment-verification","title":"Deck Commitment Verification","text":"<p>For poker, the deck shuffle must be provably fair. Clout Cards uses a commit-reveal scheme:</p>"},{"location":"architecture/verifiability/#at-hand-start","title":"At Hand Start","text":"<ol> <li>TEE generates a random 256-bit nonce</li> <li>TEE shuffles the deck using secure randomness</li> <li>TEE computes commitment: <code>hash = keccak256(JSON.stringify(deck) + nonce)</code></li> <li>Only the <code>shuffleSeedHash</code> is published in the <code>hand_start</code> event</li> </ol>"},{"location":"architecture/verifiability/#during-the-hand","title":"During the Hand","text":"<ul> <li>Players cannot reverse-engineer the deck from the hash</li> <li>The nonce makes brute-forcing computationally infeasible</li> <li>Cards are dealt according to the pre-committed deck order</li> </ul>"},{"location":"architecture/verifiability/#at-hand-end","title":"At Hand End","text":"<ol> <li>TEE reveals the full <code>deck</code> array and the <code>nonce</code></li> <li>Anyone can verify: <code>keccak256(deck + nonce) === shuffleSeedHash</code></li> <li>If they match, the deck was committed at the start and never modified</li> </ol> <pre><code>// Deck verification\nconst deckJson = JSON.stringify(deck);\nconst computedHash = ethers.keccak256(ethers.toUtf8Bytes(deckJson + nonce));\nconst isValid = computedHash === shuffleSeedHash;\n</code></pre> <p>This proves that the TEE could not have changed the deck during the hand\u2014for example, to deal favorable cards to a particular player.</p>"},{"location":"architecture/verifiability/#the-history-explorer","title":"The History Explorer","text":"<p>Clout Cards includes a built-in History Explorer that makes verification accessible to all users. It's available through the \"Hand History\" panel at any table.</p>"},{"location":"architecture/verifiability/#hand-history-list","title":"Hand History List","text":"<p>The panel shows all completed hands with:</p> <ul> <li>Hand number and timestamp</li> <li>Community cards dealt</li> <li>Total pot size</li> <li>Winner(s)</li> </ul>"},{"location":"architecture/verifiability/#hand-detail-view","title":"Hand Detail View","text":"<p>Clicking a hand opens the detailed verification view:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  \u2190 Back                                        Hand #142    \u2715   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 \ud83d\udee1\ufe0f TEE Signature Verification              \u2713 All Valid    \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502 5/5 events verified                                       \u2502  \u2502\n\u2502  \u2502 \u25bc Show events                                             \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502   Event #234: hand_start     \u2713 Valid                      \u2502  \u2502\n\u2502  \u2502   Event #235: hand_action    \u2713 Valid                      \u2502  \u2502\n\u2502  \u2502   Event #236: community_cards \u2713 Valid                     \u2502  \u2502\n\u2502  \u2502   Event #237: hand_action    \u2713 Valid                      \u2502  \u2502\n\u2502  \u2502   Event #238: hand_end       \u2713 Valid                      \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502   TEE Address: 0x7B2e...F3a9                              \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502 \ud83d\udd12 Deck Commitment                         \u2713 Verified      \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502 Committed Hash: 0x8f3a...2e1b                             \u2502  \u2502\n\u2502  \u2502 Computed Hash:  0x8f3a...2e1b                             \u2502  \u2502\n\u2502  \u2502                                                           \u2502  \u2502\n\u2502  \u2502 \ud83d\udc41\ufe0f View Full Deck                                         \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2502                                                                 \u2502\n\u2502  Community Cards: [A\u2660] [K\u2660] [Q\u2660] [J\u2660] [10\u2660]                    \u2502\n\u2502                                                                 \u2502\n\u2502  Pot: 0.05 ETH                                                 \u2502\n\u2502  Winner: Seat 3 (Royal Flush)                                  \u2502\n\u2502                                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/verifiability/#what-gets-verified","title":"What Gets Verified","text":"Check What It Proves Signature verification Event was created by the TEE and not modified Digest match Stored hash matches recomputed hash from payload TEE address match Signature recovers to the expected TEE address Deck commitment Cards dealt match the committed deck at hand start"},{"location":"architecture/verifiability/#expandable-event-details","title":"Expandable Event Details","text":"<p>Each event can be expanded to show:</p> <ul> <li>Full JSON payload</li> <li>EIP-712 digest</li> <li>Signature components (r, s, v)</li> <li>TEE version that signed it</li> </ul>"},{"location":"architecture/verifiability/#why-centralized-storage-doesnt-matter","title":"Why Centralized Storage Doesn't Matter","text":"<p>A common objection: \"If the database is centralized, can't the operator just change the data?\"</p> <p>The answer is no, because of how cryptographic signatures work:</p>"},{"location":"architecture/verifiability/#what-the-operator-cannot-do","title":"What the Operator Cannot Do","text":"Attack Why It Fails Modify an event payload Signature verification fails Change player balances Events that set balances are signed Alter deck after commit Hash verification fails Forge new events Would need TEE private key Sign with different key TEE pubkey is verifiable via attestation"},{"location":"architecture/verifiability/#what-the-operator-could-do-but-its-obvious","title":"What the Operator Could Do (But It's Obvious)","text":"Attack Detection Delete events Event ID gaps are visible Withhold events Players notice missing hands Stop the service Players can withdraw via smart contract"},{"location":"architecture/verifiability/#the-database-as-a-verifiable-cache","title":"The Database as a Verifiable Cache","text":"<p>Think of the database as a signed append-only log:</p> <pre><code>Event 1: { action: \"deposit\", amount: \"0.1 ETH\", sig: \"...\" }\nEvent 2: { action: \"hand_start\", players: [...], sig: \"...\" }\nEvent 3: { action: \"hand_action\", type: \"RAISE\", sig: \"...\" }\nEvent 4: { action: \"hand_end\", winners: [...], sig: \"...\" }\n...\n</code></pre> <ul> <li>Any modification invalidates signatures</li> <li>Any deletion creates visible gaps</li> <li>The TEE private key is the only way to create valid signatures</li> <li>The TEE private key cannot be extracted (hardware guarantee)</li> </ul>"},{"location":"architecture/verifiability/#verification-without-trust","title":"Verification Without Trust","text":"<p>The verification system enables multiple levels of assurance:</p>"},{"location":"architecture/verifiability/#level-1-ui-verification","title":"Level 1: UI Verification","text":"<p>Users can verify hands directly in the app through the History Explorer. Green checkmarks indicate valid signatures and deck commitments.</p>"},{"location":"architecture/verifiability/#level-2-manual-verification","title":"Level 2: Manual Verification","text":"<p>Developers can export event data and verify signatures using standard Ethereum libraries:</p> <pre><code># Export events\npsql -c \"SELECT * FROM events WHERE kind = 'hand_end'\" &gt; events.json\n\n# Verify with ethers.js, web3.js, or any EIP-712 library\n</code></pre>"},{"location":"architecture/verifiability/#level-3-full-audit","title":"Level 3: Full Audit","text":"<p>For complete verification:</p> <ol> <li>Get the TEE attestation from EigenCloud</li> <li>Verify the attestation proves specific code is running</li> <li>Verify the TEE public key matches the attestation</li> <li>Verify all event signatures against that public key</li> <li>Replay events to reconstruct all derived state</li> <li>Compare derived state with database state</li> </ol>"},{"location":"architecture/verifiability/#level-4-open-source","title":"Level 4: Open Source","text":"<p>The entire codebase is open source on GitHub:</p> <ul> <li>Backend game logic</li> <li>TEE signing code</li> <li>Frontend verification utilities</li> <li>Smart contracts</li> </ul> <p>Anyone can audit the code that runs inside the TEE.</p>"},{"location":"architecture/verifiability/#summary","title":"Summary","text":"<p>Clout Cards achieves trustless verification through:</p> Component Purpose TEE Ensures code integrity and key isolation EIP-712 signatures Cryptographically binds events to TEE Deck commitments Proves fair dealing without revealing cards Event chain Creates immutable audit trail History Explorer Makes verification accessible to all users <p>The result is a poker game where:</p> <ul> <li>\u2705 You don't need to trust the operator</li> <li>\u2705 Every hand can be verified independently</li> <li>\u2705 Cheating is mathematically impossible (with correct TEE)</li> <li>\u2705 The database is just a signed cache, not the source of truth</li> <li>\u2705 Even the operator cannot forge valid signatures</li> </ul> <p>This architecture proves that centralized infrastructure can provide decentralized guarantees when combined with trusted execution and cryptographic verification.</p>"},{"location":"how-to-play/","title":"How To Play","text":"<p>This section covers everything you need to know to start playing Clout Cards.</p>"},{"location":"how-to-play/#prerequisites","title":"Prerequisites","text":"<p>Before you can play, you'll need:</p> <ol> <li>A Web3 wallet (MetaMask recommended)</li> <li>A Twitter account for identity verification</li> <li>Some ETH on Base Sepolia for deposits</li> </ol>"},{"location":"how-to-play/#steps-to-get-started","title":"Steps to Get Started","text":"Step Description 1. Getting Started Connect your wallet and Twitter account 2. Depositing Funds Add ETH to your escrow balance 3. Joining a Table Find a table and buy in 4. Playing Poker Learn the game flow and actions 5. Withdrawing Funds Cash out your winnings"},{"location":"how-to-play/#quick-overview","title":"Quick Overview","text":"<pre><code>graph LR\n    A[Connect Wallet] --&gt; B[Sign in with Twitter]\n    B --&gt; C[Deposit ETH]\n    C --&gt; D[Join Table]\n    D --&gt; E[Play Poker]\n    E --&gt; F[Stand Up]\n    F --&gt; G[Withdraw]\n</code></pre>"},{"location":"how-to-play/depositing/","title":"Depositing Funds","text":"<p>Before you can join a table, you need to deposit ETH into your escrow balance.</p>"},{"location":"how-to-play/depositing/#how-deposits-work","title":"How Deposits Work","text":"<ol> <li>You send ETH to the Clout Cards smart contract</li> <li>The contract credits your escrow balance</li> <li>You can use your escrow balance to buy in at any table</li> <li>Your escrow balance is tracked on-chain</li> </ol>"},{"location":"how-to-play/depositing/#making-a-deposit","title":"Making a Deposit","text":"<ol> <li>Go to your Profile page</li> <li>Click the \"Deposit\" button</li> <li>Enter the amount of ETH you want to deposit</li> <li>Click \"Deposit\" and confirm the transaction in your wallet</li> </ol> <p>Transaction Confirmation</p> <p>After submitting, wait for the transaction to be confirmed on Base Sepolia. Your balance will update automatically once confirmed.</p>"},{"location":"how-to-play/depositing/#deposit-limits","title":"Deposit Limits","text":"Limit Amount Minimum 0.001 ETH Maximum No limit"},{"location":"how-to-play/depositing/#understanding-your-balance","title":"Understanding Your Balance","text":"<p>Your escrow balance is separate from your table balance:</p> <ul> <li>Escrow Balance: Funds held in the smart contract, available for buying into tables</li> <li>Table Balance: Funds currently at a poker table (your chip stack)</li> </ul> <p>When you stand up from a table, your table balance is returned to your escrow balance.</p>"},{"location":"how-to-play/depositing/#next-steps","title":"Next Steps","text":"<p>Join a table \u2192</p>"},{"location":"how-to-play/getting-started/","title":"Getting Started","text":"<p>This guide will walk you through connecting your wallet and Twitter account to Clout Cards.</p>"},{"location":"how-to-play/getting-started/#step-1-connect-your-wallet","title":"Step 1: Connect Your Wallet","text":"<ol> <li>Navigate to Clout Cards</li> <li>Click the \"Sign In\" button in the header</li> <li>Select \"Connect Wallet\"</li> <li>Approve the connection in your wallet (MetaMask, etc.)</li> </ol> <p>Network Required</p> <p>Clout Cards runs on Base Sepolia testnet. Your wallet will be prompted to switch networks if needed.</p>"},{"location":"how-to-play/getting-started/#step-2-sign-the-session-message","title":"Step 2: Sign the Session Message","text":"<p>After connecting your wallet, you'll be asked to sign a message to create a session:</p> <ol> <li>A signature request will appear in your wallet</li> <li>Review the message (it contains a timestamp for security)</li> <li>Click \"Sign\" to approve</li> </ol> <p>This is NOT a transaction</p> <p>Signing the session message does not cost any gas or transfer any funds. It simply proves you own the wallet.</p>"},{"location":"how-to-play/getting-started/#step-3-connect-twitter","title":"Step 3: Connect Twitter","text":"<ol> <li>Click \"Connect Twitter\" </li> <li>You'll be redirected to Twitter's authorization page</li> <li>Review the permissions and click \"Authorize app\"</li> <li>You'll be redirected back to Clout Cards</li> </ol>"},{"location":"how-to-play/getting-started/#youre-ready","title":"You're Ready!","text":"<p>Once both your wallet and Twitter are connected, you'll see your Twitter profile picture and username in the header. You're now fully logged in and can:</p> <ul> <li>Deposit funds</li> <li>Join tables</li> <li>Chat with other players</li> <li>Play poker!</li> </ul>"},{"location":"how-to-play/getting-started/#next-steps","title":"Next Steps","text":"<p>Deposit some funds \u2192</p>"},{"location":"how-to-play/joining-table/","title":"Joining a Table","text":"<p>Once you have funds in your escrow balance, you can join a poker table.</p>"},{"location":"how-to-play/joining-table/#finding-a-table","title":"Finding a Table","text":"<ol> <li>Click \"Tables\" in the navigation or go to <code>/play</code></li> <li>Browse the available tables</li> <li>Each table shows:<ul> <li>Table name</li> <li>Blinds (small/big blind amounts)</li> <li>Buy-in range (minimum/maximum)</li> <li>Number of seats</li> <li>Twitter identities of players currently seated</li> </ul> </li> </ol>"},{"location":"how-to-play/joining-table/#selecting-a-seat","title":"Selecting a Seat","text":"<ol> <li>Click on a table to enter the table view</li> <li>Empty seats show a \"Buy In\" button</li> <li>Click on an empty seat to join</li> </ol>"},{"location":"how-to-play/joining-table/#buying-in","title":"Buying In","text":"<p>When you click an empty seat:</p> <ol> <li>A buy-in dialog appears</li> <li>Use the slider or input to select your buy-in amount</li> <li>The amount must be between the table's min and max buy-in</li> <li>Click \"Buy In\" to confirm</li> </ol> <p>Buy-in comes from escrow</p> <p>Your buy-in is deducted from your escrow balance, not your wallet directly.</p>"},{"location":"how-to-play/joining-table/#table-buy-in-ranges","title":"Table Buy-in Ranges","text":"<p>Each table has different buy-in requirements:</p> Table Type Min Buy-in Max Buy-in Blinds Micro 0.001 ETH 0.01 ETH 0.00001/0.00002 Low 0.01 ETH 0.1 ETH 0.0001/0.0002 Medium 0.1 ETH 1 ETH 0.001/0.002"},{"location":"how-to-play/joining-table/#standing-up","title":"Standing Up","text":"<p>To leave a table:</p> <ol> <li>Wait for the current hand to complete (if in a hand)</li> <li>Click the \"Stand Up\" button on your seat</li> <li>Confirm the action</li> <li>Your table balance returns to your escrow</li> </ol>"},{"location":"how-to-play/joining-table/#next-steps","title":"Next Steps","text":"<p>Learn how to play poker \u2192</p>"},{"location":"how-to-play/playing-poker/","title":"Playing Poker","text":"<p>Clout Cards uses standard Texas Hold'em rules. This guide covers the game flow and available actions.</p>"},{"location":"how-to-play/playing-poker/#game-flow","title":"Game Flow","text":""},{"location":"how-to-play/playing-poker/#1-blinds","title":"1. Blinds","text":"<ul> <li>The player to the left of the dealer posts the small blind</li> <li>The next player posts the big blind</li> <li>Blinds rotate clockwise each hand</li> </ul>"},{"location":"how-to-play/playing-poker/#2-hole-cards","title":"2. Hole Cards","text":"<ul> <li>Each player receives 2 private cards (hole cards)</li> <li>Only you can see your hole cards</li> </ul>"},{"location":"how-to-play/playing-poker/#3-betting-rounds","title":"3. Betting Rounds","text":"Round Community Cards Description Pre-flop None Betting after receiving hole cards Flop 3 cards First 3 community cards revealed Turn 4 cards Fourth community card revealed River 5 cards Fifth and final community card"},{"location":"how-to-play/playing-poker/#4-showdown","title":"4. Showdown","text":"<ul> <li>If multiple players remain after the river, cards are revealed</li> <li>Best 5-card hand wins the pot</li> <li>If only one player remains (others folded), they win automatically</li> </ul>"},{"location":"how-to-play/playing-poker/#available-actions","title":"Available Actions","text":"<p>When it's your turn, you'll see action buttons:</p> Action When Available Description Fold Always Discard your hand and forfeit the pot Check No bet to call Pass action without betting Call Bet to match Match the current bet Bet No current bet Make the first bet Raise Bet to match Increase the current bet All-In Always Bet all your remaining chips"},{"location":"how-to-play/playing-poker/#action-timer","title":"Action Timer","text":"<p>Time Limit</p> <p>You have 30 seconds to act when it's your turn. If time expires, you'll automatically fold.</p>"},{"location":"how-to-play/playing-poker/#hand-rankings","title":"Hand Rankings","text":"<p>From highest to lowest:</p> <ol> <li>Royal Flush - A, K, Q, J, 10 of same suit</li> <li>Straight Flush - 5 consecutive cards of same suit</li> <li>Four of a Kind - 4 cards of same rank</li> <li>Full House - 3 of a kind + pair</li> <li>Flush - 5 cards of same suit</li> <li>Straight - 5 consecutive cards</li> <li>Three of a Kind - 3 cards of same rank</li> <li>Two Pair - 2 different pairs</li> <li>One Pair - 2 cards of same rank</li> <li>High Card - Highest card wins</li> </ol>"},{"location":"how-to-play/playing-poker/#next-steps","title":"Next Steps","text":"<p>Learn how to withdraw your winnings \u2192</p>"},{"location":"how-to-play/withdrawing/","title":"Withdrawing Funds","text":"<p>When you're ready to cash out, you can withdraw your escrow balance back to your wallet.</p>"},{"location":"how-to-play/withdrawing/#prerequisites","title":"Prerequisites","text":"<p>Before withdrawing:</p> <ol> <li>Stand up from any tables - Your table balance must be returned to escrow</li> <li>Have a positive escrow balance - Nothing to withdraw if balance is zero</li> </ol>"},{"location":"how-to-play/withdrawing/#how-withdrawals-work","title":"How Withdrawals Work","text":"<ol> <li>You request a withdrawal through the app</li> <li>The server signs an authorization message</li> <li>You submit the signed withdrawal to the smart contract</li> <li>The contract transfers ETH to your wallet</li> </ol>"},{"location":"how-to-play/withdrawing/#making-a-withdrawal","title":"Making a Withdrawal","text":"<ol> <li>Go to your Profile page</li> <li>Click the \"Cash Out\" button</li> <li>Enter the amount you want to withdraw</li> <li>Click \"Withdraw\"</li> <li>Confirm the transaction in your wallet</li> </ol> <p>Gas Fees</p> <p>Withdrawals require a blockchain transaction, so you'll pay gas fees from your wallet (not your escrow balance).</p>"},{"location":"how-to-play/withdrawing/#withdrawal-limits","title":"Withdrawal Limits","text":"Limit Amount Minimum 0.0001 ETH Maximum Your full escrow balance"},{"location":"how-to-play/withdrawing/#withdrawal-security","title":"Withdrawal Security","text":"<p>Withdrawals use a signed message system for security:</p> <ul> <li>Each withdrawal request gets a unique nonce</li> <li>The server signs the withdrawal authorization</li> <li>The signature expires after a short time</li> <li>Only you can execute the withdrawal (your wallet)</li> </ul> <p>One at a time</p> <p>You can only have one pending withdrawal at a time. Complete or let the current one expire before requesting another.</p>"},{"location":"how-to-play/withdrawing/#transaction-times","title":"Transaction Times","text":"Network Confirmation Time Base Sepolia ~2-5 seconds"},{"location":"how-to-play/withdrawing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to-play/withdrawing/#withdrawal-pending","title":"\"Withdrawal pending\"","text":"<p>You already have a pending withdrawal. Wait for it to complete or expire.</p>"},{"location":"how-to-play/withdrawing/#insufficient-balance","title":"\"Insufficient balance\"","text":"<p>Your escrow balance is less than the requested amount. Check if you have funds at a table.</p>"},{"location":"how-to-play/withdrawing/#transaction-failed","title":"Transaction failed","text":"<p>Check that you have enough ETH in your wallet for gas fees.</p>"}]}